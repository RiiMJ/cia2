<!DOCTYPE html>
<html>
<head>
  <title>Shopping Cart</title>
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css" rel="stylesheet">

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">
</head>
<body style="background-color: rgb(191, 227, 187);">
  <div class="container mt-4">
    <h1>Shopping Cart</h1>
    {% if error %}<h6 style="color: rgb(82, 16, 16);">{{error}} <a href="/user-login">Go to User Login Page</a></h6>{% endif %}
    <a href="/home" type="submit" class="btn btn-secondary mt-4 mb-3" style=" font-size: 10;background-color: rgb(0, 27, 0); color: antiquewhite;">Go Back to Shopping</a>
    <form method="post">
      <table class="table mt-4">
        <thead>
          <tr>
            <th> </th>
            <th>Product</th>
            <th>Price</th>
            <th>Quantity</th>
            <th>Total</th>
            <th> </th>
          </tr>
        </thead>
        <tbody>
          {% for product,count,price in products %}
          <tr style="color: rgb(3, 37, 3);">
            <td><img src="./static/products/{{product.id}}.png" alt="Item 3" width="50" height="50" class="mr-3"></td>
            <td>{{ product.name }}</td>
            <td>Rs.{{ product.rate }}</td>
            <td>{{count}}</td>
            <td id="total_{{ product.id }}">Rs.{{ price }}</td>
            <td><button class="btn btn-danger btn-sm" type="submit" name="remove" value="{{product.id}}">
                <i class="fa fa-trash"></i> Remove
            </a></td>
            
          </tr>
          {% endfor %}
        </tbody>
      </table>
      {% if total==0 %} <h4 style="color: red;"> No products :/</h4> {% endif %}
      {% if total!=0 %}<h6 style="margin-left: 900px" class="mt-4">Total Price: Rs.<span id="totalPrice">{{ total }}</span></h6>
      <button style="margin-left: 900px" type="button" class="btn btn-success mt-1" onclick="openPayment()">Buy Now</button>{% endif %}
    </form>
  </div>

  <div class="modal fade" id="paymentModal" tabindex="-1" role="dialog" aria-labelledby="paymentModalLabel" aria-hidden="true">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="paymentModalLabel">Add Category</h5>
               
            </div>
            <div class="modal-body">
                <form id="categoryForm" method="post">
                    <div class="form-group">
                      <label>
                        <input type="radio" name="paymentOption" value="debit_card">
                        Debit Card
                    </label><br>
                    <label>
                        <input type="radio" name="paymentOption" value="credit_card">
                        Credit Card
                    </label><br>
                    <label>
                        <input type="radio" name="paymentOption" value="upi">
                        UPI
                    </label><br>
                    <label>
                        <input type="radio" name="paymentOption" value="cash_on_delivery">
                        Cash on Delivery
                    </label><br>
                    </div>               
                </form>
            </div>
            <div class="modal-footer">
                    <button type="submit" class="btn btn-success" form="categoryForm" name="paymentOption" >Choose Option</button>
            </div>

        </div>
    </div>
</div>
<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/2.10.2/umd/popper.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/5.3.0/js/bootstrap.min.js"></script>
  
  <script>
    function openPayment() {            
        $('#paymentModal').modal('show');
    }
      
</script>
  </body>
</html>